{#
 # Created by PhpStorm.
 # User: lqdung1992@gmail.com
 # Date: 3/3/2018
 # Time: 9:13 PM
 #}
{% extends 'default_frame.twig' %}
{% set body_class = ' ' %}
{% block stylesheet %}
    <style type="text/css">

        /******************************
            Media Query for tablet, PC...
        *******************************/
        @media only screen and (min-width: 768px) {
            #farmer-status-order-button {
                width: 97% !important;
                margin-bottom: 20px;
            }
        }

        #order_id {
            border-bottom: 2px solid #333333;
            margin-right: 10px;
        }
    </style>
{% endblock stylesheet %}
{% block javascript %}
{% endblock javascript %}
{% block main %}
    {% set Shipping = Order.Shippings[0] %}
    <div id="receiver-status-wrapper" class="wrapper">
        <div class="stepwizard">
            <div class="stepwizard-row">
                {% if is_granted(constant('Eccube\\Entity\\Master\\CustomerRole::RECIPIENT')) %}
                    <div class="stepwizard-step">
                        <span class="circle-symbol">&#x25CF;</span>
                        <p class="color888 title12">出荷登録</p>
                    </div>
                    <div class="stepwizard-step">
                        <span class="circle-symbol color-primary">&#x25CF;</span>
                        <p class="color888 title12 color-primary">配送中</p>
                    </div>
                {% else %}
                    {% if constant('Eccube\\Entity\\Master\\OrderStatus::PICKUP_DONE') == Order.OrderStatus.id %}
                        <div class="stepwizard-step">
                            <span class="circle-symbol">&#x25CF;</span>
                            <p class="color888 title12">出荷登録</p>
                        </div>
                        <div class="stepwizard-step">
                            <span class="circle-symbol color-primary">&#x25CF;</span>
                            <p class="color888 title12 color-primary">集荷</p>
                        </div>
                        <div class="stepwizard-step">
                            <span class="circle-symbol">&#x25CF;</span>
                            <p class="title12 color888">配送</p>
                        </div>
                    {% else %}
                        <div class="stepwizard-step">
                            <span class="circle-symbol">&#x25CF;</span>
                            <p class="color888 title12">出荷登録</p>
                        </div>
                        <div class="stepwizard-step">
                            <span class="circle-symbol">&#x25CF;</span>
                            <p class="color888 title12">集荷</p>
                        </div>
                        <div class="stepwizard-step">
                            <span class="circle-symbol color-primary">&#x25CF;</span>
                            <p class="title12 color888 color-primary">配送</p>
                        </div>
                    {% endif %}
                {% endif %}
                <div class="stepwizard-step">
                    <span class="circle-symbol">&#x25CF;</span>
                    <p class="title12">受領確認</p>
                </div>
            </div>
        </div>

        <div id="cart-confirm-main">
            {% if is_granted(constant('Eccube\\Entity\\Master\\CustomerRole::RECIPIENT')) %}
                {#Todo: time#}
                <div class="title-section-medium">
                    <p>
                        <span class="title20">15時30分</span>
                        <span>に到着予定です</span>
                    </p>
                    <p class="title11 color888">問題なく運行中です</p>
                </div>
            {% else %}
                <div class="title-section-medium">
                    {% if constant('Eccube\\Entity\\Master\\OrderStatus::PICKUP_DONE') == Order.OrderStatus.id %}
                        <p>出荷登録が完了しました</p>
                    {% else %}
                        <p>商品を集荷しました。ただいま配送中です</p>
                    {% endif %}
                </div>
            {% endif %}
            <div class="cart-content" id="cart-main-content3">
                <p class="title14 margin-left10 margin-top10 order-title">注文情報</p>
                <div class="receiver-status-profile clearfix">
                    <p>お届け先</p>
                    <img src="{{ app.config.image_save_urlpath }}/{{ Order.Customer.profile_image|no_image_product }}" alt="profile" class="profile50 img-circle">
                    <span class="profile-name-medium padding-top15">{{ Shipping.name01 }}{{ Shipping.name02 }}</span>
                </div>

                <div class="margin-left10 order-title2">
                    <p class="title12">配達予定日</p>
                    <p class="title18">{{ Order.receiptable_date|date('m月d日') }} ({{ days[Order.receiptable_date|date('N')] }})</p>
                </div>

                <p class="title12 margin-left10 margin-top15">折りたたみコンテナの数</p>
                <div class="margin-left10 clearfix cart-container margin-right10 margin-bottom15 padding-bottom15">
                    <img src="{{ app.config.front_urlpath }}/yasai-bus/img/icon/container-large.svg">
                </div>

                <p class="status-done-th">
                    <span class="title10 margin-right160">品目</span>
                    <span class="title10 margin-left10 margin-right15">点数</span>
                    <span class="title10">価格</span>
                </p>

                {% for orderDetail in Order.OrderDetails %}
                    <div class="receiver-cart-confirm clearfix">
                        <div class="receiver-status-done float-left">
                            <img src="{{ app.config.image_save_urlpath }}/{{ orderDetail.Product.MainListImage|no_image_product }}" class="profile50">
                            <span class="title16 profile-name-medium">{{ orderDetail.product_name }}</span>
                            <span class="profile-address-medium">{{ orderDetail.Product.getAmountFollowPrice02Min }}{{ orderDetail.Product.getAmountUnitTypeFollowPrice02Min.name }}</span>
                        </div>
                        <div class="float-right">
                            <p><span class="margin-right15 border-left-right">{{ orderDetail.quantity|number_format }}</span>{{ calc_inc_tax(orderDetail.price, orderDetail.tax_rate, orderDetail.tax_rule)|price }}</p>
                        </div>
                    </div>
                {% endfor %}
                <p class="title18 margin-left10 margin-top15">注文番号</p>
                <p class="title20 margin-left10 margin-top15" id="order_id">{{ Order.id }}</p>

                {% if is_granted(constant('Eccube\\Entity\\Master\\CustomerRole::RECIPIENT')) %}
                    <div class="float-left margin-left10">
                        <p class="title14">小計</p>
                        <p class="title14">送料</p>
                        <p class="title14">ご請求額</p>
                    </div>
                    <div class="float-right margin-right10">
                        <p class="title14 text-align-right">{{ Order.subtotal|price }}</p>
                        {#Todo: implement container#}
                        <p class="title14 text-align-right">350円</p>
                        <p class="title18 text-align-right">{{ Order.payment_total|price }}</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock main %}
